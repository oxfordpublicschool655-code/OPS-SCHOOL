<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oxford Public School - Notice and Information</title>
    <style>
        /* =================== GLOBAL & LAYOUT =================== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* Header Section */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: linear-gradient(to right, #1e3c72, #2a5298);
            color: white;
            padding: 18px 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .header h1 { font-size: 2.1em; letter-spacing: 1px; }
        .header h2 { font-size: 1.1em; font-weight: 300; color: #d0d0d0; }
        .admin-btn {
            background: #ffd700; color: #333; padding: 8px 14px;
            border: none; border-radius: 4px; cursor: pointer; font-weight: 600;
        }
        .admin-btn:hover { background: #ffeb3b; }

        /* School Image Banner */
        .school-banner {
            width: 100%; height: 220px;
            /* REPLACE THIS URL WITH YOUR MAIN SCHOOL BANNER IMAGE */
            background: url('https://images.unsplash.com/photo-1580582932707-520aed937b7b?w=1200') center/cover;
            position: relative; overflow: hidden;
        }
        .school-banner::after {
            content: ''; position: absolute; inset: 0; background: rgba(0,0,0,0.35);
        }
        .school-info {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            color: white; text-align: center; z-index: 1;
        }

        /* =================== LEADERSHIP SECTION =================== */
        .leadership-section {
            max-width: 1400px; margin: 30px auto 20px auto;
            padding: 0 20px;
            display: flex;
            gap: 30px;
        }
        .leader-profile {
            flex: 1; background: white; padding: 20px; border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            display: flex;
            align-items: center;
            gap: 20px;
        }
        .leader-profile h4 { color: #2a5298; margin-bottom: 5px; }
        .leader-profile p { font-size: 0.9em; color: #555; }
        .leader-pic {
            width: 80px; height: 80px; border-radius: 50%; object-fit: cover;
            border: 3px solid #764ba2;
        }
        /* REPLACE THESE URLS with actual photos */
        #principalPic { background-image: url('https://via.placeholder.com/80/1e3c72/ffffff?text=Principal'); }
        #directorPic { background-image: url('https://via.placeholder.com/80/2a5298/ffffff?text=Director'); }


        /* =================== MAIN NOTICE BOARD =================== */
        .container {
            display: flex; max-width: 1400px; margin: 0 auto 25px auto;
            gap: 20px; padding: 0 20px;
        }

        /* Left Column - Notice List */
        .notice-list {
            width: 35%; background: white; border-radius: 10px;
            padding: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-height: 600px; overflow-y: auto;
        }
        /* ... (Rest of notice-list styling remains the same) ... */
        .notice-list h3 {
            color: #2a5298; margin-bottom: 18px;
            border-bottom: 3px solid #2a5298; padding-bottom: 8px;
        }
        .notice-item {
            padding: 12px 14px; margin-bottom: 10px; background: #f8f9fa;
            border-left: 4px solid #2a5298; cursor: pointer; transition: all 0.3s ease;
            border-radius: 5px; position: relative;
        }
        .notice-item:hover { background: #e3f2fd; transform: translateX(6px); }
        .notice-item.active { background: #2a5298; color: white; }
        .notice-title { font-weight: bold; font-size: 1.1em; margin-bottom: 5px; }
        .notice-date { font-size: 0.9em; color: #666; }
        .notice-item.active .notice-date { color: #e0e0e0; }
        .notice-type {
            display: inline-block; padding: 3px 8px; border-radius: 3px;
            font-size: 0.8em; margin-top: 5px; background: #ffd700; color: #333;
        }
        .notice-item.active .notice-type { background: white; color: #2a5298; }
        .icon-wrap { float: right; }
        .icon { font-size: 1.1em; margin-left: 10px; cursor: pointer; color: #666; }
        .notice-item.active .icon { color: #FFEB3B; }
        .notice-item.active .icon:hover { color: white; }


        /* Right Column - Notice Preview */
        .notice-preview {
            flex: 1; background: white; border-radius: 10px; padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); min-height: 600px;
        }
        .preview-header { border-bottom: 2px solid #e0e0e0; padding-bottom: 15px; margin-bottom: 20px; }
        .preview-title { color: #2a5298; font-size: 1.8em; margin-bottom: 10px; }
        .preview-meta { display: flex; gap: 20px; color: #666; font-size: 0.95em; }
        .preview-content { line-height: 1.8; color: #333; font-size: 1.05em; }
        .preview-content img { max-width: 100%; height: auto; margin: 15px 0; border-radius: 6px; box-shadow: 0 4px 12px rgba(0,0,0,.08); }

        .no-selection { text-align: center; color: #999; padding: 50px; font-size: 1.2em; }

        /* Scrollbar Styling */
        .notice-list::-webkit-scrollbar { width: 8px; }
        .notice-list::-webkit-scrollbar-track { background: #f1f1f1; border-radius: 10px; }
        .notice-list::-webkit-scrollbar-thumb { background: #2a5298; border-radius: 10px; }
        
        /* =================== ADMIN MODAL & PANEL =================== */
        #loginModal { position: fixed; inset: 0; background: rgba(0,0,0,.55); 
            display: none; align-items: center; justify-content: center; z-index: 100; }
        .modal-box { background: #fff; border-radius: 8px; padding: 30px 40px; 
            min-width: 320px; text-align: center; }
        .modal-box h3 { margin-bottom: 20px; color: #2a5298; }
        .modal-box input { width: 100%; padding: 10px; margin: 8px 0; 
            border: 1px solid #ccc; border-radius: 4px; }
        .modal-box button { margin-top: 15px; width: 100%; padding: 10px; 
            background: #2a5298; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-weight: 600; }

        #adminPanel { position: fixed; right: 0; top: 0; height: 100%; width: 420px; 
            background: #fafafa; border-left: 3px solid #2a5298; 
            box-shadow: -4px 0 12px rgba(0,0,0,.15);
            transform: translateX(100%); transition: .35s; padding: 25px 30px; overflow-y: auto; z-index: 90;
        }
        #adminPanel.open { transform: translateX(0); }
        .admin-form label { display: block; font-weight: 600; margin: 10px 0 4px; }
        .admin-form input[type=text], .admin-form input[type=date],
        .admin-form select, .admin-form textarea {
            width: 100%; padding: 8px; border: 1px solid #bbb; border-radius: 4px;
        }
        .admin-form textarea { height: 120px; resize: vertical; }
        .form-buttons { display: flex; gap: 10px; margin-top: 18px; }
        .form-buttons button { flex: 1; padding: 10px; border: none; border-radius: 4px; font-weight: 600; cursor: pointer; }
        .save-btn { background: #2a5298; color: #fff; }
        .cancel-btn, .delete-btn { background: #9e9e9e; color: #fff; }
        .delete-btn { background: #d32f2f; }

        /* Responsive Adjustments */
        @media (max-width: 992px) {
            .leadership-section { flex-direction: column; gap: 15px; }
        }
        @media (max-width: 768px) {
            .container { flex-direction: column; }
            .notice-list { width: 100%; max-height: 400px; }
            .header h1 { font-size: 1.8em; }
            .school-banner { height: 150px; }
            #adminPanel { width: 100%; }
        }
    </style>
</head>
<body>
    <!-- ================= HEADER ================= -->
    <div class="header">
      <div>
        <h1>Oxford Public School</h1>
        <h2>Notice and Information Board</h2>
      </div>
      <button class="admin-btn" id="loginBtn">Admin Login</button>
    </div>

    <!-- ================= BANNER ================= -->
    <div class="school-banner">
        <div class="school-info">
            <h3>Excellence in Education Since 1985</h3>
            <p>Shaping Future Leaders</p>
        </div>
    </div>

    <!-- ================= LEADERSHIP SECTION ================= -->
    <div class="leadership-section">
        <div class="leader-profile">
            <div class="leader-pic" id="principalPic"></div>
            <div>
                <h4>Dr. Eleanor Vance</h4>
                <p>Principal, OPS. Dedicated to fostering academic rigor and holistic student development for over a decade.</p>
            </div>
        </div>

        <div class="leader-profile">
            <div class="leader-pic" id="directorPic"></div>
            <div>
                <h4>Mr. Thomas Harding</h4>
                <p>School Director. Guiding the vision of Oxford Public School towards global educational standards and innovation.</p>
            </div>
        </div>
    </div>


    <!-- ================= MAIN NOTICE BOARD AREA ================= -->
    <div class="container">
        <!-- LEFT â€“ Notice list -->
        <div class="notice-list" id="noticeList">
            <h3>Recent Notices & Events</h3>
            <!-- JS Populates Notice Items Here -->
        </div>

        <!-- RIGHT â€“ Preview -->
        <div class="notice-preview" id="noticePreview">
            <div class="no-selection">
                <p>ðŸ“‹ Select a notice from the left panel to view details</p>
            </div>
        </div>
    </div>

    <!-- ================= LOGIN MODAL ================= -->
    <div id="loginModal">
      <div class="modal-box">
        <h3>Admin Login</h3>
        <input type="text" id="userField" placeholder="Username" value="admin" />
        <input type="password" id="passField" placeholder="Password" value="password" />
        <button id="loginSubmit">Login</button>
      </div>
    </div>

    <!-- ================= ADMIN PANEL (slide-in) ================= -->
    <div id="adminPanel">
      <h3 id="formTitle">Add New Notice</h3>

      <form class="admin-form" id="noticeForm">
        <input type="hidden" id="editId" value="">
        
        <label>Title</label>
        <input type="text" id="nTitle" required>

        <label>Date</label>
        <input type="date" id="nDate" required>

        <label>Type</label>
        <select id="nType" required>
          <option value="Event">Event</option>
          <option value="Meeting">Meeting</option>
          <option value="Holiday">Holiday</option>
          <option value="Important">Important</option>
          <option value="Policy">Policy</option>
        </select>

        <label>Details (Supports basic HTML formatting like &lt;b&gt;, &lt;ul&gt;)</label>
        <textarea id="nContent" placeholder="Write notice details here..." required></textarea>

        <label>Attach Picture (Optional)</label>
        <input type="file" id="nImg" accept="image/*">

        <label>Attach PDF (Optional)</label>
        <input type="file" id="nPdf" accept=".pdf">

        <div class="form-buttons">
          <button type="submit" class="save-btn">Save Notice</button>
          <button type="button" class="cancel-btn" id="cancelBtn">Close Panel</button>
        </div>
        <button type="button" id="deleteBtn" class="delete-btn" style="display:none; margin-top:10px;">Delete Notice</button>
      </form>
    </div>

    <!-- ================= SCRIPT SECTION ================= -->
    <script>
        const $$ = q => document.querySelector(q);
        const $_all = q => document.querySelectorAll(q);
        const LS_KEY = 'ops_notices';
        
        // --- DEFAULT DATA (from your initial request) ---
        const initialData = [
            {id:1,title:"Annual Sports Day 2024",date:"2024-11-15",type:"Event",
             content:`<h4>Event Details:</h4><p>We are pleased to announce our Annual Sports Day 2024, scheduled for December 15, 2024.</p><ul><li>Date: Dec 15</li><li>Venue: School Ground</li></ul>`,pdf:null,image:null},
            {id:2,title:"Parent-Teacher Meeting",date:"2024-11-12",type:"Meeting",
             content:`<p>The Parent-Teacher Meeting for the academic session 2024-25 will be held as per the following schedule.</p><ul><li>Classes I-V: Nov 25 (Morning)</li><li>Classes VI-VIII: Nov 25 (Afternoon)</li></ul>`,pdf:null,image:null},
            {id:3,title:"Winter Vacation Notice",date:"2024-11-10",type:"Holiday",
             content:`<p>The school will remain closed for Winter Vacation from December 25, 2024, to January 5, 2025.</p><p>School reopens: January 6, 2025.</p>`,pdf:null,image:null},
            {id:4,title:"Science Exhibition 2024",date:"2024-11-08",type:"Event",
             content:`<h4>Annual Science Exhibition:</h4><p>Showcasing innovative projects by our talented students.</p><ul><li>Date: November 30, 2024</li></ul>`,pdf:null,image:null},
            {id:5,title:"Fee Payment Reminder",date:"2024-11-05",type:"Important",
             content:`<p>Reminder for the payment of school fees for the Third Quarter (October - December 2024).</p><ul><li>Due Date: November 30, 2024</li></ul>`,pdf:null,image:null},
            {id:6,title:"School Uniform Policy Update",date:"2024-11-03",type:"Policy",
             content:`<p>Please note the following updates to the school uniform policy effective from December 1, 2024.</p>`,pdf:null,image:null},
            {id:7,title:"Cultural Fest Registration",date:"2024-11-01",type:"Event",
             content:`<p>Get ready for the cultural extravaganza! Showcasing talents in Dance, Singing, and Drama.</p><ul><li>Registration Deadline: November 15, 2024</li></ul>`,pdf:null,image:null}
        ];
        
        // --- STATE VARIABLES ---
        let notices = [];          
        let isAdmin = false;       
        let nextId = 100;          

        // --- STORAGE & INIT ---
        function loadNotices(){
            const raw = localStorage.getItem(LS_KEY);
            if(raw){ 
                notices = JSON.parse(raw); 
                nextId = notices.length > 0 ? Math.max(...notices.map(n=>n.id)) + 1 : 100;
            } else { 
                notices = initialData; 
                saveNotices(); 
            }
        }
        function saveNotices(){ 
            localStorage.setItem(LS_KEY, JSON.stringify(notices)); 
        }
        function formatDateISOtoDisplay(iso){
            if (!iso) return "N/A";
            try {
                const opt={year:'numeric',month:'long',day:'numeric'};
                return new Date(iso).toLocaleDateString('en-US',opt);
            } catch { return iso; }
        }

        // --- RENDER PUBLIC VIEW (List & Preview) ---
        function renderNoticeList(){
            const listDiv = $$('#noticeList');
            $_all('.notice-item').forEach(e=>e.remove()); 

            notices.sort((a,b)=>new Date(b.date)-new Date(a.date)); 
            notices.forEach(n=>{
                const item = document.createElement('div');
                item.className='notice-item';
                item.dataset.id = n.id;
                item.onclick = ()=>showNotice(n.id);

                let adminControls = '';
                if(isAdmin){
                    adminControls = `
                        <span class="icon" title="Edit" onclick="editNotice(event,${n.id})">&#9998;</span>
                        <span class="icon" title="Delete" onclick="deleteNotice(event,${n.id})">&#128465;</span>
                    `;
                }

                item.innerHTML = `
                   <div class="notice-title">${n.title}</div>
                   <div class="notice-date">Posted: ${formatDateISOtoDisplay(n.date)}</div>
                   <span class="notice-type">${n.type}</span>
                   <span class="icon-wrap">${adminControls}</span>
                `;
                listDiv.appendChild(item);
            });
        }

        function showNotice(id){
            // Highlight active item
            $_all('.notice-item').forEach(it=>it.classList.remove('active'));
            const active=document.querySelector(`.notice-item[data-id='${id}']`);
            if(active) active.classList.add('active');

            const n=notices.find(x=>x.id==id);
            const prev=$$('#noticePreview');
            
            let attachmentHtml = '';
            if (n.image) {
                attachmentHtml += `<img src="${n.image}" alt="Attached Image">`;
            }
            if (n.pdf) {
                attachmentHtml += `<p style="margin-top:15px"><a href="${n.pdf}" download="${n.title.replace(/[^a-z0-9]/gi, '_')}.pdf">ðŸ“„ Download attached PDF</a></p>`;
            }


            prev.innerHTML=`
                 <div class="preview-header">
                   <h2 class="preview-title">${n.title}</h2>
                   <div class="preview-meta">
                      <span>ðŸ“… ${formatDateISOtoDisplay(n.date)}</span>
                      <span>ðŸ“Œ ${n.type}</span>
                   </div>
                 </div>
                 <div class="preview-content">${n.content || ''}</div>
                 ${attachmentHtml}
            `;
        }

        // --- ADMIN LOGIN/LOGOUT ---
        const ADMIN_USER='admin', ADMIN_PASS='password'; 

        $$('#loginBtn').onclick = ()=>{ isAdmin ? logoutAdmin() : openLoginModal(); }

        function openLoginModal(){ $$('#loginModal').style.display='flex'; }
        function closeLoginModal(){ $$('#loginModal').style.display='none'; }

        $$('#loginSubmit').onclick = ()=>{
            const u=$('#userField').value.trim();
            const p=$('#passField').value.trim();
            if(u===ADMIN_USER && p===ADMIN_PASS){
                isAdmin=true;
                closeLoginModal();
                $$('#loginBtn').textContent='Logout';
                renderNoticeList(); // Rerender to show admin controls
                openAdminPanel();   // Auto-open panel on login
            } else {
                alert('Invalid credentials. Try admin/password');
            }
        };

        function logoutAdmin(){
            isAdmin=false;
            $$('#loginBtn').textContent='Admin Login';
            closeAdminPanel();
            renderNoticeList(); // Rerender to hide admin controls
            $$('#noticePreview').innerHTML = '<div class="no-selection"><p>ðŸ“‹ Select a notice from the left panel to view details</p></div>';
        }

        // --- ADMIN PANEL OPERATIONS ---
        const panel = $$('#adminPanel');
        function openAdminPanel(editing=false){
            panel.classList.add('open');
            if(!editing) resetForm();
        }
        function closeAdminPanel(){ 
            panel.classList.remove('open'); 
            resetForm(); 
        }

        $$('#cancelBtn').onclick = closeAdminPanel;
        $$('#deleteBtn').onclick = ()=>{
            const id=$('#editId').value;
            if(id && confirm('Are you SURE you want to PERMANENTLY delete this notice?')){
                deleteNotice(null, id); 
                closeAdminPanel();
            }
        };


        document.addEventListener('keydown',e=>{
          if(e.key==='Escape'){ closeLoginModal(); closeAdminPanel(); }
        });

        function resetForm(){
            $$('#formTitle').textContent='Add New Notice';
            $$('#noticeForm').reset();
            $('#editId').value='';
            $$('#deleteBtn').style.display='none';
        }

        function fileToBase64(file){
            if(!file) return Promise.resolve(null);
            return new Promise(res=>{
                const reader=new FileReader();
                reader.onload=e=>res(e.target.result);
                reader.readAsDataURL(file);
            });
        }

        $$('#noticeForm').onsubmit = async e=>{
            e.preventDefault();
            const idField=$('#editId').value;
            const newData={
                title:$('#nTitle').value.trim(),
                date:$('#nDate').value,
                type:$('#nType').value,
                content:$('#nContent').value
            };
            
            // Handle file uploads (Keep old file data if new upload is skipped)
            const pdfFile=$('#nPdf').files[0]||null;
            const imgFile=$('#nImg').files[0]||null;
            [newData.pdf,newData.image]=await Promise.all([fileToBase64(pdfFile),fileToBase64(imgFile)]);
            
            let isNew = !idField;

            if(isNew){   // ADD
                newData.id = nextId++;
                notices.push(newData);
            } else {     // EDIT
                const idx=notices.findIndex(n=>n.id==idField);
                if(idx>-1){ 
                    const existing = notices[idx];
                    notices[idx] = {
                        ...existing, 
                        ...newData,
                        pdf: newData.pdf || existing.pdf, 
                        image: newData.image || existing.image 
                    };
                }
            }
            saveNotices();
            renderNoticeList();
            closeAdminPanel();
            if(!isNew) showNotice(idField); // Keep the edited notice open in preview
        };

        function editNotice(ev,id){
            ev.stopPropagation();
            const n=notices.find(x=>x.id==id);
            if(!n) return;
            
            $$('#formTitle').textContent='Edit Notice';
            $$('#editId').value=n.id;
            $$('#nTitle').value=n.title;
            $$('#nDate').value=n.date;
            $$('#nType').value=n.type;
            $$('#nContent').value=n.content;
            
            $$('#deleteBtn').style.display='inline-block';
            openAdminPanel(true);
        }

        function deleteNotice(ev,id){
            if(ev) ev.stopPropagation();
            
            const itemToDelete = notices.find(n => n.id == id);
            if (!itemToDelete) return;

            if (confirm(`Are you sure you want to delete the notice: "${itemToDelete.title}"?`)) {
                notices = notices.filter(n=>n.id != id);
                saveNotices();
                renderNoticeList();
                $$('#noticePreview').innerHTML = 
                   '<div class="no-selection"><p>ðŸ“‹ Select a notice from the left panel to view details</p></div>';
            }
        }

        // --- INITIALIZATION ---
        loadNotices();
        renderNoticeList();
    </script>
</body>
</html>
```
